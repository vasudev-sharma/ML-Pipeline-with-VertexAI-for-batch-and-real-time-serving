# name: Build and Push Inference Image to GAR

# on:
#   workflow_run:
#     workflows:
#         - Linting and Formatting
#         - Run Unit Tests
#         - Build and Push Development Image to GAR
#     types:
#         - completed
#   # push:
#   #   branches: [master]

# jobs:
#   build-and-push:
#     runs-on: ubuntu-latest

#     steps:
#     - uses: actions/checkout@v4

#     - name: Set up Cloud SDK
#       uses: google-github-actions/setup-gcloud@v2
#       with:
#         project_id: ${{ secrets.PROJECT_ID }}

#     - name: Authenticate
#       uses: google-github-actions/auth@v2
#       with:
#         credentials_json: ${{ secrets.GCP_SA_KEY }}

#     - name: Configure Docker
#       run: gcloud auth configure-docker ${{ secrets.REGION }}-docker.pkg.dev --quiet


#     - name: Build Inference image
#       run: |
#         docker build -f Dockerfile.production . -t \
#         ${{ secrets.REGION }}-docker.pkg.dev/${{ secrets.PROJECT_ID }}/${{ secrets.REPO_NAME }}/${{ secrets.IMAGE_NAME }}:inf

#     - name: Push Inference image
#       run: |
#         docker push \
#         ${{ secrets.REGION }}-docker.pkg.dev/${{ secrets.PROJECT_ID }}/${{ secrets.REPO_NAME }}/${{ secrets.IMAGE_NAME }}:inf


#     # - name: Build training image
#     #   run: |
#     #     docker build -f Dockerfile.training . -t \
#     #     ${{ secrets.REGION }}-docker.pkg.dev/${{ secrets.PROJECT_ID }}/${{ secrets.REPO_NAME }}/${{ secrets.IMAGE_NAME }}:train

#     # - name: Push training image
#     #   run: |
#     #     docker push \
#     #     ${{ secrets.REGION }}-docker.pkg.dev/${{ secrets.PROJECT_ID }}/${{ secrets.REPO_NAME }}/${{ secrets.IMAGE_NAME }}:train

    
    
